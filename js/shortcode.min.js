jQuery(document).ready(function($){"use strict";function t(){var t=this;this.collection=null,$("#bloomberg_ticker").on("click",".genericon",function(e){t.sortView(e.target)}),$("#refresh_ticker").on("click",function(){$("#bloomberg_ticker").addClass("loading"),t.getData()})}var e;t.prototype.getData=function(){var t=this;$.ajax({url:wp_ajax_url,dataType:"json",data:{action:"ticker_query",nonce:wp_ajax_nonce},success:function(e){if("object"==typeof e&&"object"==typeof e[0]){var o={sortby:"symbol",sort:"asc"};t.collection=t.sortData(e,o),t.render(t.collection)}else $("#bloomberg_ticker").removeClass("loading").find(".ticker_table > tbody").html('<tr><td colspan="4">An unknown error occurred while retriving the feed. Please try again.</td></tr>')},error:function(t,e,o){console.log(o)}})},t.prototype.sortData=function(t,e){var o=t.sort(function(t,o){var r;return r=t[e.sortby]<o[e.sortby]?"asc"===e.sort?-1:1:t[e.sortby]>o[e.sortby]?"asc"===e.sort?1:-1:0});return o},t.prototype.render=function(t){var e,o="",r=$("#bloomberg_ticker");for(e in t)t.hasOwnProperty(e)&&t[e].hasOwnProperty("symbol")&&(o+="<tr>\n",o+="<td>"+t[e].symbol+"</td>\n",o+="<td>"+t[e].last+"</td>\n",o+="<td>"+t[e].change+"</td>\n",o+="<td>"+t[e].percent_change+"</td>\n",o+="</tr>\n");$(r).find(".ticker_table > tbody").html("").append(o),$(r).removeClass("loading")},t.prototype.sortView=function(t){var e=$(t).data(),o;$(t).hasClass("active")||($("#bloomberg_ticker .genericon.active").removeClass("active"),$(t).addClass("active")),$(t).hasClass("genericon-expand")?($(t).removeClass("genericon-expand").addClass("genericon-collapse"),$(t).data("sort","desc")):($(t).removeClass("genericon-collapse").addClass("genericon-expand"),$(t).data("sort","asc")),o=this.sortData(this.collection,e),this.render(o)},e=new t,e.getData()});